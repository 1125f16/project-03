<html>
<head>
<title>Hangee</title>

</head>
<body>

<img src="logo.PNG" alt="Hangee" style="width:304px;height:228px;" align="middle"> <br/>

<div id="weather"></div>
<p><span id="temp"></span></p>
<p><span id="condition"></span></p>

<script>


var weather = new XMLHttpRequest();
weather.open("GET", "http://api.openweathermap.org/data/2.5/weather?q=boston,ma&APPID=de49f2c0ca814cc766a7080d028d5a92", false);

weather.send(null);
var r = JSON.parse(weather.response);
var temp = r.weather[0].main + "<br />";
var condition1 = r.main.temp + "<br />";

var condition = parseInt(condition1)-273.15;

document.getElementById("temp").innerHTML = temp;
document.getElementById("condition").innerHTML = condition;

var tessel = require("tessel");
var backpack = require('backpack-ht16k33').use(tessel.port['B']);

backpack.on('ready', function() {
  backpack.clear();
 
  setInterval(function() {},500); // Keep the tessel alive

  //backpack.writeBitmap(smile);
  backpack.animate(frames,500);
  //backpack.scroll(smile,500);
});

var frames = [smile, straight, frown];
// Add bitmaps from next slide


var smile = [
    [0,0,1,1,1,1,0,0],
    [0,1,0,0,0,0,1,0],
    [1,0,1,0,0,1,0,1],
    [1,0,0,0,0,0,0,1],
    [1,0,1,0,0,1,0,1],
    [1,0,0,1,1,0,0,1],
    [0,1,0,0,0,0,1,0],
    [0,0,1,1,1,1,0,0],
  ];


var straight = [
  [0,0,1,1,1,1,0,0],
  [0,1,0,0,0,0,1,0],
  [1,0,1,0,0,1,0,1],
  [1,0,0,0,0,0,0,1],
  [1,0,0,0,0,0,0,1],
  [1,0,1,1,1,1,0,1],
  [0,1,0,0,0,0,1,0],
  [0,0,1,1,1,1,0,0],
];

var frown = [
  [0,0,1,1,1,1,0,0],
  [0,1,0,0,0,0,1,0],
  [1,0,1,0,0,1,0,1],
  [1,0,0,0,0,0,0,1],
  [1,0,0,1,1,0,0,1],
  [1,0,1,0,0,1,0,1],
  [0,1,0,0,0,0,1,0],
  [0,0,1,1,1,1,0,0],
];


</script>
